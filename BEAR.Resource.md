# 概要

BEAR.Resourceはモデルやコントローラー、ビュー等対象をリソースとして捉えそれぞれの接続にROAを適用したコンポーネント接続のためのライブラリです。クライアントはGET/POST/PUT/DELETE等制限されたインターフェイスを使ってのみリソースにアクセスできます。リクエストを受けたリソースはリクエストに応じて結果を返す。結果はどのような場合であってもcode/header/bodyの３つのプロパティを持ちます。これは例外やエラーでも適用され。モデルはHTTPです。利用するフレームワークは選びません。

## サンプルコード
クライアント側

    $user = $resource->newInstance('app://self/User');
    $resource->get($user, ['id' => $id])->set('user')->in(SET::LAZY);
リソース側
    class User implementes ResourceObject
　　 {
     
    /**
     * @Template
     * @Cache("30")
     */
    public function onGet($id)
    {
     ....

メソッド呼び出しは名前付き引数（ネームドパラメーター）で行います。

## リクエストを保持

コンポーネント間でデータのset/getを直接するのではなく、コード実行時にはまずリクエスト方法を記録します。実リクエストは任意のタイミングで行うことができます。ビューに現れるレイジーロードや、CQRSパターンのためです。

## スキーマ

リソースはそれぞれURIで表現されます。スキーマがデータ構造を表す。MVCのMの部分、最も基本となるリソースはAppリソースといいapp://で表す。ページはpage://、viewはview://です。

## リンク

リソースはリンクを持つことができます。リソースとリソースのリンク知識をクライアントが持つのではなく、リソースが持ちます。つまりどのモデルとモデルの接続をコントローラーが知るのではなく、モデルが知ってるということです。(HTMLでのAタグです）

## Appリソース
MVCのモデルです。ビジネスルールを記述するサービスレイヤーまたはトランザクションスクリプトとして機能します。メソッドインターセプターをアノテーションで表し、バリデーション、テンプレート適用、キャッシュなどはリソース側の機能として持ちます（クライアントで持たない）

## ページリソース

MVCでいうとコントローラーの部分です。ページリソースの主な役割はAppリソースのリクエストです、そのリソースリクエスト方法をページリソースが保持します。ページリソースはビューに対する知識はありません。ページをHTMLとしてレンダリングするのか、RSSとして出力するのかは、ページ自身は決定しません。そのぺージリソースをどのビューリソースにリンクするのかは内部ではなく、外部で決定します。

## ビューリソース

ビューリソースがページリソースを参照してページが保持するリソースリクエストを行い値をテンプレートにセットします。GUI MVCのobserverパターンに近いイメージです。ビューに責任をもつのはビュークラスで、独立しています。コントローラー（ページリソース）とは疎結合です。

